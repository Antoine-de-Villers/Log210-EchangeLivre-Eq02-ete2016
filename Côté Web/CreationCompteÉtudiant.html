<!DOCTYPE html>

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<title>Échangisme Libraire</title>

    <link href="./Modele.css" rel="stylesheet" type="text/css"/>
	
	<script>
		var user;
		function setUser(nomIn){
			user = nomIn;
		}
		var email;
		function setEmail(mailIn){
			email = mailIn;
		}
		var pass;
		function setPass(passIn){
			pass = passIn;
		}
		var confirm;
		function setConfirm(confirmIn){
		confirm = confirmIn;}
		function saveAccount(){
		
			//code copié : http://www.codeproject.com/Tips/492632/Email-Validation-in-JavaScript
			
			var validEmail = document.getElementById('email');
			var filter = /.+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
			
			if (!filter.test(validEmail.value)) {
				alert('Please provide a valid email address');
				email.focus;
				return false;
			}
			//termine ici
			
			//http://www.javascriptsource.com/forms/val-pass.html
			
			var invalidPassword = " ";
			var length = 10;
			var password1 = document.getElementById('password');
			var password2 = document.getElementById('validPassword');
			
			if(document.getElementById('password').value.length < length){
				window.alert("This password is too small. It must be 10 characters long.")
				return false;
			}
			else if (document.getElementById('password').value.length > length){
				window.alert("This password is too long. It must be 10 characters long.")
				return false;
			}
			//termine ici
		
			if(confirm==pass){
				
				if (localStorage.getItem('User'+user+'email') != email){
					localStorage.setItem('User'+ user + 'name', user);               // defining the localStorage variable 
					localStorage.setItem('User'+ user + 'email', email); 
					localStorage.setItem('User'+ user + 'pass', pass); 
					window.alert("Nouveau compte  étudiant:\n\n" + 
					"Nom : " + localStorage.getItem('User'+ user + 'name') + "\n" +
					"Email : " + localStorage.getItem('User'+ user + 'email') + "\n" +
					"Mot de passe : " + localStorage.getItem('User'+ user + 'pass')
					);  // accessing it 
				}
				else{
					window.alert("Le compte existe déjà");
				}
			}
			else{
				window.alert("Les deux mots de passes ne sont pas correspondant");
			}
			//alert("Hello " + localStorage.fullname);                     // another way of accessing the variable 
			//localStorage.removeItem('fullname');    
		}
	</script>
	
</head>

	<body class="TextPageCss"> <!---->

		<div align="center"> 

			<a href="index.html">
				<h1>Échangisme Libraire</h1>
			</a>
			
			<div align="Left">
				<fieldset class="ButtonCompteCss" >
				<legend class="TextTitreCss">Creation d'un compte étudiant :</legend>
				<br>
						Nom :
						<br>
						<input type="text" class="ButtonCompteCss" value="" onchange="setUser(value);">
						<br>
						Adresse courriel :
						<br>
						<input type="email" id='email' class="ButtonCompteCss" value="" onchange="setEmail(value);">
						<br>
						Mot de passe :
						<br>
						<input id='password' type="password" class="ButtonCompteCss" value="" onchange="setPass(value);">
						<br>
						Comfirmer le mot de passe :
						<br>
						<input id='validPassword' type="password" class="ButtonCompteCss" value="" onchange="setConfirm(value)">
						<br>
						<br>
						
						
						<a href="index.html">
							<input type="button" class="ButtonCompteCss" value="Comfirmer" onclick="saveAccount();">
						</a>
				</fieldset>
			</div>
		</div>
	</body>
		 